@page "/setari"
@using Radzen
@inject NotificationService NotificationService

<RadzenCard Style="margin: 2rem">
    <RadzenTabs>
       <Tabs>
            <RadzenTabsItem Text="General">
                <RadzenFieldset Text="Informații Aplicație" Style="margin-bottom: 1rem;">
                    <RadzenTextBox @bind-Value="appName" Placeholder="Nume aplicație" Style="width: 300px; margin-bottom: 10px;" />
                    <RadzenTextBox @bind-Value="appDescription" Placeholder="Descriere" Style="width: 500px; margin-bottom: 10px;" />
                    <RadzenSwitch @bind-Value="maintenanceMode" Style="margin-top:10px;" />
                    <label style="margin-left: 10px;">Mod mentenanță activ</label>
                </RadzenFieldset>

                <RadzenFieldset Text="Localizare">
                    <RadzenDropDown @bind-Value="selectedLanguage"
                                    Data="@languages"
                                    TextProperty="Name"
                                    ValueProperty="Code"
                                    Placeholder="Selectează limba"
                                    Style="width: 300px; margin-bottom: 10px;" />
                    <RadzenDropDown @bind-Value="timezone"
                                    Data="@timezones"
                                    Placeholder="Selectează fus orar"
                                    Style="width: 300px;" />
                </RadzenFieldset>
            </RadzenTabsItem>

            <RadzenTabsItem Text="Securitate">
                <RadzenFieldset Text="Parolă" Style="margin-bottom: 1rem;">
                    <RadzenNumeric @bind-Value="minPasswordLength" Min="6" Max="20" Style="width: 150px;" />
                    <label style="margin-left: 10px;">Lungime minimă</label>
                    <RadzenSwitch @bind-Value="requireSpecialChar" Style="margin-top:10px;" />
                    <label style="margin-left: 10px;">Necesită caractere speciale</label>
                </RadzenFieldset>

                <RadzenFieldset Text="Autentificare">
                    <RadzenSwitch @bind-Value="enable2FA" />
                    <label style="margin-left: 10px;">Activează autentificare în doi pași (2FA)</label>
                </RadzenFieldset>
            </RadzenTabsItem>

            <RadzenTabsItem Text="Notificări">
                <RadzenFieldset Text="Email" Style="margin-bottom: 1rem;">
                    <RadzenTextBox @bind-Value="emailFrom" Placeholder="Adresa expeditor" Style="width: 300px; margin-bottom: 10px;" />
                    <RadzenSwitch @bind-Value="emailNotifications" />
                    <label style="margin-left: 10px;">Trimite notificări email</label>
                </RadzenFieldset>

                <RadzenFieldset Text="SMS">
                    <RadzenTextBox @bind-Value="smsProviderApiKey" Placeholder="API Key Provider SMS" Style="width: 400px; margin-bottom: 10px;" />
                    <RadzenSwitch @bind-Value="smsNotifications" />
                    <label style="margin-left: 10px;">Activează notificări SMS</label>
                </RadzenFieldset>
            </RadzenTabsItem>
       </Tabs>
    </RadzenTabs>

    <div style="margin-top: 20px;">
        <RadzenButton Text="Salvează Setări" Click="@SaveSettings" ButtonStyle="ButtonStyle.Primary" Style="margin-right: 1rem;" />
        <RadzenButton Text="Resetează" Click="@ResetSettings" ButtonStyle="ButtonStyle.Secondary" />
    </div>
</RadzenCard>

@code {
    private string appName = "MyApp";
    private string appDescription = "Aplicație de administrare";
    private bool maintenanceMode = false;

    private string selectedLanguage = "ro";
    private List<LanguageItem> languages = new()
    {
        new LanguageItem { Code = "ro", Name = "Română" },
        new LanguageItem { Code = "en", Name = "Engleză" }
    };
    private string timezone = "Europe/Bucharest";
    private List<string> timezones = new()
    {
        "Europe/Bucharest", "Europe/London", "America/New_York", "Asia/Bangkok"
    };

    private int minPasswordLength = 8;
    private bool requireSpecialChar = true;
    private bool enable2FA = false;

    private string emailFrom = "admin@myapp.com";
    private bool emailNotifications = true;
    private string smsProviderApiKey = "";
    private bool smsNotifications = false;

    private async Task SaveSettings()
    {
        await Task.Delay(300);
        NotificationService.Notify(NotificationSeverity.Success, "Setările au fost salvate.");
    }

    private void ResetSettings()
    {
        appName = "MyApp";
        appDescription = "Aplicație de administrare";
        maintenanceMode = false;
        selectedLanguage = "ro";
        timezone = "Europe/Bucharest";
        minPasswordLength = 8;
        requireSpecialChar = true;
        enable2FA = false;
        emailFrom = "admin@myapp.com";
        emailNotifications = true;
        smsProviderApiKey = "";
        smsNotifications = false;

        NotificationService.Notify(NotificationSeverity.Warning, "Setările au fost resetate.");
    }

    public class LanguageItem
    {
        public string Code { get; set; }
        public string Name { get; set; }
    }
}
